var metrogram=angular.module("metrogram",[]).config(["$routeProvider","$locationProvider",function(b,a){b.when("/tag/:tag/speed/:speed");}]).controller("slideshow",function(b,h,d,g,f){var e="https://api.instagram.com/v1/tags/%tag%/media/recent?access_token=257058201.9af4692.3d68e63b114944a0be332da732923a23&callback=JSON_CALLBACK",a,c;
b.fetchImages=function(){b.loadingClass="loading";b.imgCurrent=0;if(!g.current){f.path("/tag/"+b.tag+"/speed/"+b.speed);}else{if(angular.isDefined(g.current.params.tag)){b.tag=g.current.params.tag;
}if(angular.isDefined(g.current.params.speed)){b.speed=g.current.params.speed;}}h.jsonp(e.replace("%tag%",b.tag)).success(function(i){delete b.loadingClass;
b.images=i.data;console.log(i.data);if(i.data.length){b.makeActiveSlide(b.imgCurrent);}if(c){d.cancel(c);}if(i.data.length){c=d(b.fetchImages,b.speed*i.data.length);
}}).error(function(){delete b.loadingClass;c=d(b.fetchImages,2000);});};d(b.fetchImages);b.advanceSlide=function(){if(angular.isDefined(b.images)&&b.images.length){b.makeActiveSlide(b.imgCurrent+1);
}d(b.advanceSlide,b.speed);};d(b.advanceSlide);b.makeActiveSlide=function(i){delete b.images[b.imgCurrent].isActive;b.imgCurrent=(i)%b.images.length;b.images[b.imgCurrent].isActive=true;
};b.tagChange=function(){f.path("/tag/"+b.tag+"/speed/"+b.speed);if(a){d.cancel(a);}a=d(function(){b.fetchImages();d.cancel(a);},1000);};}).filter("escape",function(){return function(a){return escape(a);
};});